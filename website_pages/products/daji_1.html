<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daji Professional Fabric Shears - R Design Supply</title>
    <link rel="stylesheet" href="/style_sheet/styles.css">
    <link rel="stylesheet" href="/style_sheet/product_detail.css">
</head>
<body>
    <header>
        <div class="logo">
            <a href="/renda_design_supply.html">
                <img src="/images/rds_logo.png" alt="Renda Design Supply">
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="/tools/tools.html">Tools</a></li>
                <li><a href="/n&t/n&t.html">Notions and Trims</a></li>
                <li><a href="/event/event.html">Events</a></li>
                <li><a href="/support/support.html">Support</a></li>
            </ul>
        </nav>
        <div class="search-cart">
            <form id="searchForm" action="../search/search-results.html" method="get">
                <input type="text" id="searchInput" name="q" placeholder="">
                <button type="submit"></button>
            </form>
            <div class="cart-link">
                <a href="/checkout/cart.html">
                    <img src="/images/cart.png" alt="Cart">
                </a>
            </div>
        </div>
    </header>

    <main>
        <div class="product-detail">
            <div class="product-gallery">
                <div class="main-image">
                    <img src="/images/tools/scissors/Daji_scissor.jpg" alt="Daji Professional Fabric Shears" id="mainImage">
                    <!-- <div class="corner-logo">
                        <img src="/images/rds_logo.png" alt="RDS. Logo">
                    </div> -->
                </div>
                <div class="thumbnail-container">
                    <img src="/images/tools/scissors/Daji_scissor.png" alt="Daji_scissors - Front View" class="thumbnail active" onclick="changeImage(this, '/images/tools/scissors/Daji_scissor.jpg')">
                    <img src="/images/tools/scissors/Daji_scissor-2.jpg" alt="Daji_scissors - Side View" class="thumbnail" onclick="changeImage(this, '/images/tools/scissors/Daji_scissor-2.jpg')">
                    <img src="/images/tools/scissors/Daji_scissor-3.jpg" alt="Daji_scissors - Detail View" class="thumbnail" onclick="changeImage(this, '/images/tools/scissors/Daji_scissor-3.jpg')">
                    <img src="/images/tools/scissors/Daji_scissor-4.jpg" alt="Daji_scissors - In Use" class="thumbnail" onclick="changeImage(this, '/images/tools/scissors/Daji_scissor-4.jpg')">
                </div>
            </div>
            <div class="product-info">
                <h1>Daji Professional Fabric Shears</h1>
                <p class="price">$35.50 - $65.00</p>
                
                <div class="product-options">
                    <label for="size">Size:</label>
                    <select id="size" name="size" onchange="updatePrice()">
                        <option value="8">8 inch - $35.50</option>
                        <option value="9">9 inch - $39.50</option>
                        <option value="10">10 inch - $43.50</option>
                        <option value="11">11 inch - $46.50</option>
                        <option value="12">12 inch - $55.50</option>
                        <option value="10L">Left-Hand 10 inch - $57.00</option>
                        <option value="12L">Left-Hand 12 inch - $65.00</option>
                    </select>
                    <br>
                    <label>Color:</label>
                    <div class="color-options">
                        <div class="color-option black selected" onclick="selectColor(this, 'Black')"></div>
                        <!-- <div class="color-option gold" onclick="selectColor(this, 'Gold')"></div>
                        <div class="color-option silver" onclick="selectColor(this, 'Silver')"></div> -->
                    </div>
                    
                    <label>Quantity:</label>
                    <div class="quantity-selector">
                        <button onclick="decrementQuantity()">-</button>
                        <input type="number" id="quantity" value="1" min="1" max="10">
                        <button onclick="incrementQuantity()">+</button>
                    </div>
                    
                    <p class="size-guide" onclick="showSizeGuide()">Size Guide</p>
                    
                    <button class="btn" onclick="addToCart()">Add to Cart</button>
                </div>
            </div>
            
            <div class="product-description">
                <h2>Product Description</h2>
                <p>Crafted with precision and designed for professional use, the Daji Professional Fabric Shears represent the pinnacle of cutting technology for fabric artists, fashion designers, and professional tailors.</p>
                
                <p>These premium shears feature high-carbon stainless steel blades that maintain their sharpness through countless projects. The ergonomic soft-grip handles reduce hand fatigue during extended cutting sessions, while the balanced weight distribution provides exceptional control and precision.</p>
                
                <div class="product-features">
                    <h3>Features:</h3>
                    <ul>
                        <li>Precision-ground high-carbon stainless steel blades</li>
                        <li>Ergonomic soft-grip handles for comfortable extended use</li>
                        <li>Perfectly balanced weight distribution</li>
                        <li>Smooth cutting action with minimal hand fatigue</li>
                        <li>Available in 8", 9", and 10" lengths</li>
                        <li>Three elegant finishes: Black, Gold, and Silver</li>
                        <li>Long-lasting sharpness for professional results</li>
                        <li>Lifetime warranty against manufacturing defects</li>
                    </ul>
                </div>
                
                <h3>Care Instructions:</h3>
                <p>For optimal performance and longevity, wipe blades clean after each use and store in a dry environment. Apply a drop of sewing machine oil to the pivot point occasionally to maintain smooth operation. Use only for cutting fabric—never paper, cardboard, or other materials that could dull the blades.</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>RDS. &copy; 2025</p> 
        </div>
    </footer>
    
    <script>
    // Check if localStorage is available
    function isLocalStorageAvailable() {
        try {
            const test = 'test';
            localStorage.setItem(test, test);
            localStorage.removeItem(test);
            return true;
        } catch(e) {
            return false;
        }
    }

    function changeImage(thumbnail, newSrc) {
        // Update main image
        document.getElementById('mainImage').src = newSrc;
        
        // Update active thumbnail
        let thumbnails = document.querySelectorAll('.thumbnail');
        thumbnails.forEach(thumb => {
            thumb.classList.remove('active');
        });
        thumbnail.classList.add('active');
    }

    function selectColor(element, colorName) {
        // Update selected color styling
        let colorOptions = document.querySelectorAll('.color-option');
        colorOptions.forEach(option => {
            option.classList.remove('selected');
        });
        element.classList.add('selected');
        
        console.log(`Selected color: ${colorName}`);
    }
    
    function updatePrice() {
        const sizeSelect = document.getElementById('size');
        const selectedSize = sizeSelect.value;
        
        const prices = {
            '8': 35.50,
            '9': 39.50,
            '10': 43.50,
            '11': 46.50,
            '12': 55.50,
            '10L': 57.00,
            '12L': 65.00
        };
        
        const price = prices[selectedSize] || 43.50;
        document.querySelector('.price').innerText = `$${price.toFixed(2)}`;
    }
    
    function incrementQuantity() {
        event.preventDefault();
        const quantityInput = document.getElementById('quantity');
        if (quantityInput.value < 100) {
            quantityInput.value = parseInt(quantityInput.value) + 1;
        }
    }
    
    function decrementQuantity() {
        event.preventDefault();
        const quantityInput = document.getElementById('quantity');
        if (quantityInput.value > 1) {
            quantityInput.value = parseInt(quantityInput.value) - 1;
        }
    }
    
    function showSizeGuide() {
        alert('Size Guide:\n8" - Ideal for detailed work and smaller projects\n9" - Perfect for most general cutting tasks\n10" - Best for long, straight cuts and heavier fabrics\n11" - Professional heavy-duty cutting\n12" - Extra-long cuts and thick materials\nLeft-Hand versions - Specially designed for left-handed users');
    }

    function showAddToCartFeedback(quantity, size, color) {
        const feedback = document.createElement('div');
        feedback.className = 'add-to-cart-feedback';
        feedback.innerHTML = `
            <div class="feedback-content">
                <p>✓ Added to cart: ${quantity} Daji Professional Fabric Shears</p>
                <p>Size: ${size}", Color: ${color}</p>
            </div>
        `;
        document.body.appendChild(feedback);

        // Add styles
        feedback.style.position = 'fixed';
        feedback.style.top = '20%';
        feedback.style.right = '20%';
        feedback.style.backgroundColor = '#4CAF50';
        feedback.style.color = 'white';
        feedback.style.padding = '15px';
        feedback.style.borderRadius = '5px';
        feedback.style.zIndex = '1000';
        feedback.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
        feedback.style.transition = 'opacity 0.5s ease-in-out';

        // Show then fade out
        setTimeout(() => {
            feedback.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(feedback)) {
                    document.body.removeChild(feedback);
                }
            }, 500);
        }, 3000);
    }
    
    function addToCart() {
        if (!isLocalStorageAvailable()) {
            alert("Unable to access local storage. Please check your browser settings or try a different browser.");
            return;
        }

        const sizeSelect = document.getElementById('size');
        const size = sizeSelect.value;
        const quantity = parseInt(document.getElementById('quantity').value);
        const colorElement = document.querySelector('.color-option.selected');
        let color = 'Black'; // Default

        if (colorElement) {
            if (colorElement.classList.contains('gold')) {
                color = 'Gold';
            } else if (colorElement.classList.contains('silver')) {
                color = 'Silver';
            }
        }

        if (quantity < 1 || quantity > 100) {
            alert('Please enter a quantity between 1 and 100.');
            return;
        }

        // Get price based on size
        const prices = {
            '8': 35.50,
            '9': 39.50,
            '10': 43.50,
            '11': 46.50,
            '12': 55.50,
            '10L': 57.00,
            '12L': 65.00
        };
        const price = prices[size] || 43.50;

        // Create standardized cart item
        const newItem = {
            id: Date.now() + Math.random(), // Unique ID
            name: 'Daji Professional Fabric Shears',
            size: size,
            sizeDisplay: `${size}"${size.includes('L') ? ' (Left-Hand)' : ''}`,
            color: color,
            price: price,
            quantity: quantity,
            total: price * quantity
        };

        try {
            // Get existing cart items
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            
            // Check if identical item already exists (same name, size, and color)
            const existingItemIndex = cartItems.findIndex(item => 
                item.name === newItem.name && 
                item.size === newItem.size &&
                item.color === newItem.color
            );
            
            if (existingItemIndex !== -1) {
                // Update existing item quantity
                cartItems[existingItemIndex].quantity += quantity;
                cartItems[existingItemIndex].total = cartItems[existingItemIndex].price * cartItems[existingItemIndex].quantity;
                console.log(`Updated existing item. New quantity: ${cartItems[existingItemIndex].quantity}`);
            } else {
                // Add as new item
                cartItems.push(newItem);
                console.log('Added new item to cart');
            }

            // Save updated cart
            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            console.log('Cart saved successfully. Total items:', cartItems.length);

            // Show success feedback
            showAddToCartFeedback(quantity, size, color);
            
        } catch (error) {
            console.error('Error adding to cart:', error);
            alert("There was a problem adding the item to your cart. Please try again.");
        }
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
        updatePrice(); // Set initial price display
    });
</script>
</body>
</html>