<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kearing Hip Curve Ruler - R Design Supply</title>
    <link rel="stylesheet" href="/style_sheet/styles.css">
    <link rel="stylesheet" href="/style_sheet/product_detail.css">

</head>
<body>
    <header>
        <div class="logo">
            <a href="/renda_design_supply.html">
                <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/v1756387201/rds_logo_hbqnog.png" alt="Renda Design Supply">
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="/tools/tools.html">Tools</a></li>
                <li><a href="/n&t/n&t.html">Notions ✚ Trims</a></li>
                <li><a href="/f&l/f&l.html">Fabric ✚ Leather</a></li>
                <li><a href="/support/support.html">Support</a></li>
            </ul>
        </nav>
        <div class="search-cart">
            <form id="searchForm" action="../search/search-results.html" method="get">
                <input type="text" id="searchInput" name="q" placeholder="">
                <button type="submit"></button>
            </form>
            <div class="cart-link">
                <a href="/checkout/cart.html">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/cart.png" alt="Cart">
                </a>
            </div>
        </div>
    </header>

    <main>
        <div class="product-detail">
            <div class="product-gallery">
                <div class="main-image">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler.jpg" alt="Kearing Hip Curve Metal Ruler" id="mainImage">
                </div>
                <div class="thumbnail-container">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler.jpg" alt="Kearing Hip Curve Ruler - Front View" class="thumbnail active" onclick="changeImage(this, 'https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler.jpg')">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/v1756387168/Kearing_Hip_Curve_Metal_Ruler-4.jpg" alt="Kearing Hip Curve Ruler - Side View" class="thumbnail" onclick="changeImage(this, 'https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/v1756387168/Kearing_Hip_Curve_Metal_Ruler-4.jpg')">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler-3.jpg" alt="Kearing Hip Curve Ruler - Detail View" class="thumbnail" onclick="changeImage(this, 'https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler-3.jpg')">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler-5.jpg" alt="Kearing Hip Curve Ruler - Back View" class="thumbnail" onclick="changeImage(this, 'https://res.cloudinary.com/ds4bmw1nd/image/upload/f_auto/q_auto/Kearing_Hip_Curve_Metal_Ruler-5.jpg')">
                    <img src="https://res.cloudinary.com/ds4bmw1nd/image/upload/v1756387189/Kearing_Hip_Cuver_Plastic_Ruler-3.jpg" alt="Kearing Hip Curve Ruler - Close Up" class="thumbnail" onclick="changeImage(this, 'https://res.cloudinary.com/ds4bmw1nd/image/upload/v1756387189/Kearing_Hip_Cuver_Plastic_Ruler-3.jpg')">
                </div>
            </div>
            <div class="product-info">
                <h1>Kearing_Hip Curve Ruler</h1>
                <p class="price">$56.5</p>
                
                <div class="product-options">
                    <label>Measurement Type:</label>
                    <div class="measurement-options">
                        <div class="measurement-option">
                            <input type="radio" id="imperial" name="measurement" value="imperial" checked onchange="updatePrice()">
                            <label for="imperial">Imperial (inches) - $52.5</label>
                        </div>
                        <div class="measurement-option">
                            <input type="radio" id="metric" name="measurement" value="metric" onchange="updatePrice()">
                            <label for="metric">Metric (cm) - $52.5</label>
                        </div>
                        <div class="measurement-option">
                            <input type="radio" id="plastic metric" name="measurement" value="plastic metric" onchange="updatePrice()">
                            <label for="plastic metric">Plastic Metric (cm) - $12.5</label>
                    </div>
                    
                    <label>Quantity:</label>
                    <div class="quantity-selector">
                        <button onclick="decrementQuantity()">-</button>
                        <input type="number" id="quantity" value="1" min="1" max="10">
                        <button onclick="incrementQuantity()">+</button>
                    </div>
                    
                    <button class="btn" onclick="addToCart()">Add to Cart</button>
                </div>
            </div>
            
            <div class="product-description">
                <h2>Product Description</h2>
                <p>The Kearing Hip Curve Metal Ruler is a specialized tool designed for creating smooth, accurate curves for pattern making and design work. This professional-grade French curve ruler is ideal for drafting hip lines, armholes, necklines, and other curved pattern elements with precision and consistency.</p>
                
                <p>Made from durable metal with a sleek, polished finish, this hip curve ruler is an essential tool for fashion designers, pattern makers, and sewing enthusiasts who need to create perfectly graded curves.</p>
                
                <div class="product-features">
                    <h3>Features:</h3>
                    <ul>
                        <li>Precision-engineered metal construction for durability and accuracy</li>
                        <li>Smooth, non-jagged edges for clean line drawing</li>
                        <li>Available in both metric (cm) and imperial (inch) measurements</li>
                        <li>Clear, easy-to-read measurement markings</li>
                        <li>Ergonomic design for comfortable handling</li>
                        <li>Ideal for drafting hip curves, armholes, necklines, and sleeve caps</li>
                        <li>Versatile curve profiles suitable for various garment patterns</li>
                        <li>Professional-grade tool used in fashion schools and design studios</li>
                    </ul>
                </div>
                
                <h3>Care Instructions:</h3>
                <p>Wipe clean with a soft, dry cloth after use. Avoid contact with sharp objects that could scratch the surface or bend the ruler. Store flat or hanging to prevent warping. Regular cleaning will maintain the clarity of measurement markings and ensure long-lasting performance.</p>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>RDS. &copy; 2025</p> 
        </div>
    </footer>
    
    <script>
    // Check if localStorage is available
    function isLocalStorageAvailable() {
        try {
            const test = 'test';
            localStorage.setItem(test, test);
            localStorage.removeItem(test);
            return true;
        } catch(e) {
            return false;
        }
    }

    // Debug logging function
    function debugLog(message) {
        console.log(`[DEBUG] ${message}`);
    }

    function changeImage(thumbnail, newSrc) {
        document.getElementById('mainImage').src = newSrc;
        
        let thumbnails = document.querySelectorAll('.thumbnail');
        thumbnails.forEach(thumb => {
            thumb.classList.remove('active');
        });
        thumbnail.classList.add('active');
        debugLog(`Image changed to: ${newSrc}`);
    }
    
    function updatePrice() {
        const measurementOptions = document.getElementsByName('measurement');
        let price;
        let measurementType;
        
        for (let i = 0; i < measurementOptions.length; i++) {
            if (measurementOptions[i].checked) {
                measurementType = measurementOptions[i].value;
                break;
            }
        }
        
        switch(measurementType) {
            case 'imperial':
                price = '$52.50';
                break;
            case 'metric':
                price = '$52.50';
                break;
            case 'plastic metric':
                price = '$12.50';
                break;
            default:
                price = '$52.50';
        }
        
        document.querySelector('.price').innerText = price;
        debugLog(`Price updated to: ${price} for ${measurementType} measurement`);
    }
    
    function incrementQuantity() {
        event.preventDefault();
        const quantityInput = document.getElementById('quantity');
        if (quantityInput.value < 100) {
            quantityInput.value = parseInt(quantityInput.value) + 1;
            debugLog(`Quantity incremented to: ${quantityInput.value}`);
        }
    }
    
    function decrementQuantity() {
        event.preventDefault();
        const quantityInput = document.getElementById('quantity');
        if (quantityInput.value > 1) {
            quantityInput.value = parseInt(quantityInput.value) - 1;
            debugLog(`Quantity decremented to: ${quantityInput.value}`);
        }
    }

    function showAddToCartFeedback(quantity, measurementType, price) {
        const feedback = document.createElement('div');
        feedback.className = 'add-to-cart-feedback';
        
        let measurementDisplay;
        switch(measurementType) {
            case 'imperial':
                measurementDisplay = "Imperial (inches)";
                break;
            case 'metric':
                measurementDisplay = "Metric (cm)";
                break;
            case 'plastic metric':
                measurementDisplay = "Plastic Metric (cm)";
                break;
        }
        
        feedback.innerHTML = `
            <div class="feedback-content">
                <p>✓ Added to cart: ${quantity} Kearing Hip Curve Ruler</p>
                <p>Type: ${measurementDisplay}, Price: $${price.toFixed(2)}</p>
            </div>
        `;
        
        // Add styles
        feedback.style.position = 'fixed';
        feedback.style.top = '20%';
        feedback.style.right = '20%';
        feedback.style.backgroundColor = '#4CAF50';
        feedback.style.color = 'white';
        feedback.style.padding = '15px';
        feedback.style.borderRadius = '5px';
        feedback.style.zIndex = '1000';
        feedback.style.boxShadow = '0 2px 10px rgba(0,0,0,0.2)';
        feedback.style.transition = 'opacity 0.5s ease-in-out';
        
        document.body.appendChild(feedback);
        
        setTimeout(() => {
            feedback.style.opacity = '0';
            setTimeout(() => {
                if (document.body.contains(feedback)) {
                    document.body.removeChild(feedback);
                }
            }, 500);
        }, 3000);

        debugLog('Cart feedback displayed');
    }
    
    function addToCart() {
        if (!isLocalStorageAvailable()) {
            alert("Unable to access local storage. Please check your browser settings or try a different browser.");
            return;
        }

        debugLog('Add to cart button clicked');
        
        const measurementOptions = document.getElementsByName('measurement');
        let measurementType;
        
        for (let i = 0; i < measurementOptions.length; i++) {
            if (measurementOptions[i].checked) {
                measurementType = measurementOptions[i].value;
                break;
            }
        }
        
        const quantity = parseInt(document.getElementById('quantity').value);

        if (quantity < 1 || quantity > 100) {
            alert('Please enter a quantity between 1 and 100.');
            return;
        }

        let price; 
        let measurementDisplay;
        
        switch(measurementType) {
            case 'imperial':
                price = 52.50;
                measurementDisplay = "Imperial (inches)";
                break;
            case 'metric':
                price = 52.50;
                measurementDisplay = "Metric (cm)";
                break;
            case 'plastic metric':
                price = 12.50;
                measurementDisplay = "Plastic Metric (cm)";
                break;
            default:
                price = 52.50;
                measurementDisplay = "Imperial (inches)";
        }

        // Create standardized cart item object
        const newItem = {
            id: Date.now() + Math.random(),
            name: 'Kearing Hip Curve Metal Ruler',
            size: measurementType,
            sizeDisplay: measurementDisplay,
            color: 'N/A',
            price: price,
            quantity: quantity,
            total: price * quantity
        };

        debugLog(`Cart item created: ${JSON.stringify(newItem)}`);

        try {
            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            debugLog(`Retrieved ${cartItems.length} existing items from localStorage`);

            // Check if identical item already exists
            const existingItemIndex = cartItems.findIndex(item => 
                item.name === newItem.name && 
                item.size === newItem.size
            );
            
            if (existingItemIndex !== -1) {
                cartItems[existingItemIndex].quantity += quantity;
                cartItems[existingItemIndex].total = cartItems[existingItemIndex].price * cartItems[existingItemIndex].quantity;
                debugLog(`Updated existing item quantity to ${cartItems[existingItemIndex].quantity}`);
            } else {
                cartItems.push(newItem);
                debugLog('Added new item to cart');
            }

            localStorage.setItem('cartItems', JSON.stringify(cartItems));
            debugLog(`Saved ${cartItems.length} items to localStorage`);
            
            showAddToCartFeedback(quantity, measurementType, price);
            
        } catch (error) {
            console.error('Error adding to cart:', error);
            alert("There was a problem adding the item to your cart. Please try again.");
        }
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
        if (!isLocalStorageAvailable()) {
            console.error("localStorage is not available. Cart functionality will be limited.");
        } else {
            debugLog('localStorage is available. Cart functionality should work.');
        }
        
        updatePrice();
    });
</script>
</body>
</html>